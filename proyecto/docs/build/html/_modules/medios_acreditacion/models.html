

<!DOCTYPE html>
<html class="writer-html5" lang="es" data-content_root="../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>medios_acreditacion.models &mdash; documentación de Global Exchange - Versión 2</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=3e28a9e4"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/translations.js?v=f85f4cfb"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Índice" href="../../genindex.html" />
    <link rel="search" title="Búsqueda" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Global Exchange
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Buscar documentos" aria-label="Buscar documentos" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contenido:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../clientes.html">Clientes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usuarios.html">Usuarios</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../roles.html">Roles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../monedas.html">Monedas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../transacciones.html">Transacciones</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../medios_acreditacion.html">Medios de Acreditación</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../proyecto.html">Directorio principal del Proyecto</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../transacciones.html">Transacciones</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../medios_acreditacion.html">Medios de Acreditación</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Global Exchange</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Código de módulo</a></li>
      <li class="breadcrumb-item active">medios_acreditacion.models</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Código fuente para medios_acreditacion.models</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Modelos para los medios de acreditación del sistema.</span>

<span class="sd">Este módulo contiene los modelos que representan los diferentes medios de acreditación</span>
<span class="sd">que pueden tener asociados los clientes del sistema, como cuentas bancarias y billeteras</span>
<span class="sd">electrónicas.</span>

<span class="sd">Clases:</span>
<span class="sd">    MedioAcreditacion: Modelo abstracto base con campos comunes.</span>
<span class="sd">    CuentaBancaria: Modelo que representa una cuenta bancaria de un cliente.</span>
<span class="sd">    Billetera: Modelo que representa una billetera electrónica de un cliente.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>

<div class="viewcode-block" id="MedioAcreditacion">
<a class="viewcode-back" href="../../medios_acreditacion.html#medios_acreditacion.models.MedioAcreditacion">[documentos]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">MedioAcreditacion</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Modelo abstracto base para medios de acreditación.</span>
<span class="sd">    </span>
<span class="sd">    Esta clase define los campos comunes que comparten todos los medios</span>
<span class="sd">    de acreditación como cuentas bancarias y billeteras electrónicas.</span>
<span class="sd">    </span>
<span class="sd">    Attributes:</span>
<span class="sd">        nombre_titular (CharField): Nombre completo del titular.</span>
<span class="sd">        nro_documento (CharField): Número de documento del titular.</span>
<span class="sd">        cliente (ForeignKey): Referencia al cliente propietario.</span>
<span class="sd">        fecha_creacion (DateTimeField): Fecha y hora de creación del registro.</span>
<span class="sd">        activo (BooleanField): Estado activo/inactivo del medio de acreditación.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="c1"># Nombre completo del titular del medio de acreditación</span>
    <span class="n">nombre_titular</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Nombre completo del titular&quot;</span>
    <span class="p">)</span>
    
    <span class="c1"># Número de documento de identidad del titular</span>
    <span class="n">nro_documento</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Número de documento del titular (CI, RUC, etc.)&quot;</span>
    <span class="p">)</span>
    
    <span class="c1"># Relación con el cliente propietario</span>
    <span class="n">cliente</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="s1">&#39;clientes.Cliente&#39;</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Cliente propietario del medio de acreditación&quot;</span>
    <span class="p">)</span>
    
<div class="viewcode-block" id="MedioAcreditacion.Meta">
<a class="viewcode-back" href="../../medios_acreditacion.html#medios_acreditacion.models.MedioAcreditacion.Meta">[documentos]</a>
    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Metadatos del modelo base.&quot;&quot;&quot;</span>
        <span class="n">abstract</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Esto hace que sea un modelo abstracto (no crea tabla)</span></div>
</div>



<div class="viewcode-block" id="CuentaBancaria">
<a class="viewcode-back" href="../../medios_acreditacion.html#medios_acreditacion.models.CuentaBancaria">[documentos]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">CuentaBancaria</span><span class="p">(</span><span class="n">MedioAcreditacion</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Modelo que representa una cuenta bancaria asociada a un cliente.</span>
<span class="sd">    </span>
<span class="sd">    Hereda de MedioAcreditacion los campos comunes: nombre_titular, </span>
<span class="sd">    nro_documento, cliente, fecha_creacion, activo.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">BANCO_CHOICES</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;-------&#39;</span><span class="p">,</span> <span class="s1">&#39;Seleccione un banco&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;ATLAS&#39;</span><span class="p">,</span> <span class="s1">&#39;Banco Atlas&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;BANCOP&#39;</span><span class="p">,</span> <span class="s1">&#39;BANCOP&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;BASA&#39;</span><span class="p">,</span> <span class="s1">&#39;Banco Basa&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;BNF&#39;</span><span class="p">,</span> <span class="s1">&#39;Banco Nacional de Fomento (BNF)&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;CITIBANK&#39;</span><span class="p">,</span> <span class="s1">&#39;Citibank&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;CONTINENTAL&#39;</span><span class="p">,</span> <span class="s1">&#39;Banco Continental&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;FAMILIAR&#39;</span><span class="p">,</span> <span class="s1">&#39;Banco Familiar&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;GNB&#39;</span><span class="p">,</span> <span class="s1">&#39;Banco GNB&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;INTERFISA&#39;</span><span class="p">,</span> <span class="s1">&#39;Interfisa Banco&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;ITAU&#39;</span><span class="p">,</span> <span class="s1">&#39;Banco Itaú&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;SUDAMERIS&#39;</span><span class="p">,</span> <span class="s1">&#39;Banco Sudameris&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;UENO&#39;</span><span class="p">,</span> <span class="s1">&#39;ueno bank&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;ZETA&#39;</span><span class="p">,</span> <span class="s1">&#39;Zeta Banco&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;FINLATINA&#39;</span><span class="p">,</span> <span class="s1">&#39;Financiera Finlatina&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;TU_FINANCIERA&#39;</span><span class="p">,</span> <span class="s1">&#39;Tu Financiera&#39;</span><span class="p">),</span> 
        <span class="p">(</span><span class="s1">&#39;PARAGUAYO_JAPONESA&#39;</span><span class="p">,</span> <span class="s1">&#39;Financiera Paraguayo Japonesa&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;FIC&#39;</span><span class="p">,</span> <span class="s1">&#39;FIC - Financiera&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;COOP_UNIVERSITARIA&#39;</span><span class="p">,</span> <span class="s1">&#39;Cooperativa Universitaria&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;COOP_SAGRADOS_CORAZONES&#39;</span><span class="p">,</span> <span class="s1">&#39;Cooperativa Sagrados Corazones&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;COOP_CHORTITZER&#39;</span><span class="p">,</span> <span class="s1">&#39;Cooperativa Chortitzer&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    
    <span class="n">banco</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
        <span class="n">choices</span><span class="o">=</span><span class="n">BANCO_CHOICES</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Banco al que pertenece la cuenta bancaria&quot;</span>
    <span class="p">)</span>
    
    <span class="n">numero_cuenta</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Número de la cuenta bancaria&quot;</span>
    <span class="p">)</span>
    
    <span class="c1"># Sobreescribimos la relación para tener related_name específico</span>
    <span class="n">cliente</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="s1">&#39;clientes.Cliente&#39;</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
        <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;cuentas_bancarias&#39;</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Cliente propietario de la cuenta bancaria&quot;</span>
    <span class="p">)</span>
    
    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Metadatos del modelo CuentaBancaria.&quot;&quot;&quot;</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">&#39;cuenta_bancaria&#39;</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s1">&#39;Cuenta Bancaria&#39;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s1">&#39;Cuentas Bancarias&#39;</span>
        <span class="n">default_permissions</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Deshabilitar permisos por defecto</span>
        
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Representación en cadena de la cuenta bancaria.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_banco_display</span><span class="p">()</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">numero_cuenta</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">nombre_titular</span><span class="si">}</span><span class="s2">)&quot;</span></div>



<div class="viewcode-block" id="Billetera">
<a class="viewcode-back" href="../../medios_acreditacion.html#medios_acreditacion.models.Billetera">[documentos]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">Billetera</span><span class="p">(</span><span class="n">MedioAcreditacion</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Modelo que representa una billetera electrónica asociada a un cliente.</span>
<span class="sd">    </span>
<span class="sd">    Hereda de MedioAcreditacion los campos comunes: nombre_titular, </span>
<span class="sd">    nro_documento, cliente, fecha_creacion, activo.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">TIPO_BILLETERA_CHOICES</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;-------&#39;</span><span class="p">,</span> <span class="s1">&#39;Seleccione un tipo de billetera&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;tigo&#39;</span><span class="p">,</span> <span class="s1">&#39;Tigo Money&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;personal&#39;</span><span class="p">,</span> <span class="s1">&#39;Billetera Personal&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;zimple&#39;</span><span class="p">,</span> <span class="s1">&#39;Zimple&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    
    <span class="n">tipo_billetera</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
        <span class="n">choices</span><span class="o">=</span><span class="n">TIPO_BILLETERA_CHOICES</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Tipo de billetera electrónica&quot;</span>
    <span class="p">)</span>
    
    <span class="n">telefono</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Número de teléfono asociado a la billetera&quot;</span>
    <span class="p">)</span>
    
    <span class="c1"># Sobreescribimos la relación para tener related_name específico</span>
    <span class="n">cliente</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="s1">&#39;clientes.Cliente&#39;</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
        <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;billeteras&#39;</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Cliente propietario de la billetera&quot;</span>
    <span class="p">)</span>
    
<div class="viewcode-block" id="Billetera.get_tipo_billetera_display">
<a class="viewcode-back" href="../../medios_acreditacion.html#medios_acreditacion.models.Billetera.get_tipo_billetera_display">[documentos]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_tipo_billetera_display</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Método personalizado para mostrar el tipo de billetera correctamente.&quot;&quot;&quot;</span>
        <span class="n">display_map</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;tigo&#39;</span><span class="p">:</span> <span class="s1">&#39;Tigo Money&#39;</span><span class="p">,</span>
            <span class="s1">&#39;personal&#39;</span><span class="p">:</span> <span class="s1">&#39;Billetera Personal&#39;</span><span class="p">,</span>
            <span class="s1">&#39;zimple&#39;</span><span class="p">:</span> <span class="s1">&#39;Zimple&#39;</span><span class="p">,</span>
        <span class="p">}</span>
        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tipo_billetera</span> <span class="ow">in</span> <span class="n">display_map</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">display_map</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">tipo_billetera</span><span class="p">]</span>
        
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">TIPO_BILLETERA_CHOICES</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tipo_billetera</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tipo_billetera</span><span class="p">)</span></div>

    
    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Representación en cadena de la billetera.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_tipo_billetera_display</span><span class="p">()</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">telefono</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">nombre_titular</span><span class="si">}</span><span class="s2">)&quot;</span>
    
    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Metadatos del modelo Billetera.&quot;&quot;&quot;</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">&#39;billetera&#39;</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s1">&#39;Billetera&#39;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s1">&#39;Billeteras&#39;</span>
        <span class="n">default_permissions</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Deshabilitar permisos por defecto</span></div>



<div class="viewcode-block" id="TarjetaLocal">
<a class="viewcode-back" href="../../medios_acreditacion.html#medios_acreditacion.models.TarjetaLocal">[documentos]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">TarjetaLocal</span><span class="p">(</span><span class="n">MedioAcreditacion</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Modelo que representa una tarjeta de crédito local (Panal o Cabal) asociada a un cliente.</span>
<span class="sd">    </span>
<span class="sd">    Hereda de MedioAcreditacion los campos comunes: nombre_titular, </span>
<span class="sd">    nro_documento, cliente.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">TIPO_TARJETA_CHOICES</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;PANAL&#39;</span><span class="p">,</span> <span class="s1">&#39;Panal&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;CABAL&#39;</span><span class="p">,</span> <span class="s1">&#39;Cabal&#39;</span><span class="p">),</span>
    <span class="p">]</span>
    
    <span class="n">brand</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
        <span class="n">choices</span><span class="o">=</span><span class="n">TIPO_TARJETA_CHOICES</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Tipo de tarjeta local&quot;</span>
    <span class="p">)</span>
    
    <span class="n">numero_tarjeta</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">19</span><span class="p">,</span>  <span class="c1"># Formato: XXXX XXXX XXXX XXXX</span>
        <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Número completo de la tarjeta&quot;</span>
    <span class="p">)</span>

    <span class="n">last4</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">4</span>
    <span class="p">)</span>
    
    <span class="n">mes_expiracion</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span>
        <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Mes de expiración (1-12)&quot;</span>
    <span class="p">)</span>
    
    <span class="n">anio_expiracion</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span>
        <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Año de expiración (YYYY)&quot;</span>
    <span class="p">)</span>
    
    <span class="n">cvv</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Código de seguridad CVV&quot;</span>
    <span class="p">)</span>
    
    <span class="n">fecha_creacion</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span>
        <span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Fecha de creación del registro&quot;</span>
    <span class="p">)</span>
    
    <span class="n">activo</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Indica si la tarjeta está activa&quot;</span>
    <span class="p">)</span>
    
    <span class="c1"># Sobreescribimos la relación para tener related_name específico</span>
    <span class="n">cliente</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="s1">&#39;clientes.Cliente&#39;</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
        <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;tarjetas_locales&#39;</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Cliente propietario de la tarjeta&quot;</span>
    <span class="p">)</span>
    
<div class="viewcode-block" id="TarjetaLocal.get_last4">
<a class="viewcode-back" href="../../medios_acreditacion.html#medios_acreditacion.models.TarjetaLocal.get_last4">[documentos]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_last4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Obtiene los últimos 4 dígitos de la tarjeta.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">numero_tarjeta</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span></div>

    
<div class="viewcode-block" id="TarjetaLocal.get_numero_enmascarado">
<a class="viewcode-back" href="../../medios_acreditacion.html#medios_acreditacion.models.TarjetaLocal.get_numero_enmascarado">[documentos]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_numero_enmascarado</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retorna el número de tarjeta enmascarado.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;**** **** **** </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">get_last4</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span></div>

    
<div class="viewcode-block" id="TarjetaLocal.save">
<a class="viewcode-back" href="../../medios_acreditacion.html#medios_acreditacion.models.TarjetaLocal.save">[documentos]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sobrescribe el método save para actualizar last4 automáticamente.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_last4</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

    
    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Metadatos del modelo TarjetaLocal.&quot;&quot;&quot;</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">&#39;tarjeta_local&#39;</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s1">&#39;Tarjeta Local&#39;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s1">&#39;Tarjetas Locales&#39;</span>
        <span class="n">default_permissions</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Deshabilitar permisos por defecto</span></div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Derechos de autor 2025, Grupo 1.
      <span class="lastupdated">Actualizado por última vez en True.
      </span></p>
  </div>

  Compilado con <a href="https://www.sphinx-doc.org/">Sphinx</a> usando un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">tema</a>
    proporcionado por <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>