{% extends 'base.html' %}
{% load static %}

{% block title %}{% if form.instance.pk %}Editar{% else %}Crear{% endif %} Moneda - Global Exchange{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'formularios.css' %}">
{% endblock %}

{% block content %}
<div class="contenido">
    <div class="form-cabecera">
        <h2>
            {% if form.instance.pk %}
                Editar Moneda
            {% else %}
                Crear Moneda
            {% endif %}
        </h2>
        <p class="subtitulo">
            {% if form.instance.pk %}
                Modifica los datos de la moneda {{ form.instance.nombre }}
            {% else %}
                Agrega una nueva moneda al sistema para las operaciones de cambio
            {% endif %}
        </p>
    </div>

    <form method="post" id="monedaForm" novalidate>
        {% csrf_token %}
        
        {% if not form.instance.pk or perms.monedas.gestion %}
            <div class="form-campo">
                <label for="{{ form.nombre.id_for_label }}">Nombre de la Moneda</label>
                {{ form.nombre }}
                {% if form.nombre.errors %}
                    <div class="form-errores">
                        {% for error in form.nombre.errors %}
                            <div class="mensaje-error">{{ error }}</div>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>

            <div class="form-campo">
                <label for="{{ form.simbolo.id_for_label }}">SÃ­mbolo de la Moneda</label>
                {{ form.simbolo }}
                {% if form.simbolo.errors %}
                    <div class="form-errores">
                        {% for error in form.simbolo.errors %}
                            <div class="mensaje-error">{{ error }}</div>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        {% endif %}

        {% if not form.instance.pk or perms.monedas.cambiar_tasa or perms.monedas.gestion %}
            <div class="form-campo">
                <label for="{{ form.tasa_base.id_for_label }}">Tasa base</label>
                {{ form.tasa_base }}
                {% if form.tasa_base.errors %}
                    <div class="form-errores">
                        {% for error in form.tasa_base.errors %}
                            <div class="mensaje-error">{{ error }}</div>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        {% endif %}

        {% if not form.instance.pk or perms.monedas.cambiar_decimales or perms.monedas.gestion %}
            <div class="form-campo">
                <label for="{{ form.decimales.id_for_label }}">Decimales</label>
                {{ form.decimales }}
                {% if form.decimales.errors %}
                    <div class="form-errores">
                        {% for error in form.decimales.errors %}
                            <div class="mensaje-error">{{ error }}</div>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        {% endif %}

        <div class="zona-botones">
            <button type="submit" class="btn-enviar">
                {% if form.instance.pk %}
                    Editar Moneda
                {% else %}
                    Crear Moneda
                {% endif %}
            </button>
            <a href="{% url 'monedas:lista_monedas' %}" class="btn-atras">
                Cancelar
            </a>
        </div>
    </form>
    </div>
</div>
{% endblock %}
